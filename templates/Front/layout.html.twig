<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="advanced custom search, agency, agent, business, clean, corporate, directory, google maps, homes, idx agent, listing properties, membership packages, property, real broker, real estate, real estate agent, real estate agency, realtor">
    <meta name="description" content="FindHouse - Real Estate HTML Template">
    <meta name="CreativeLayers" content="ATFN">
    <link rel="stylesheet" href="{{ asset('front/css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ asset('front/css/style.css') }}">
    <link rel="stylesheet" href="{{ asset('front/css/app.css') }}">
    <!-- Responsive stylesheet -->
    <link rel="stylesheet" href="{{ asset('front/css/responsive.css') }}">
    <link rel="stylesheet" href="{{ asset('front/css/form-wizard.css') }}">
    <!-- Title -->
    <!-- Title -->
    <title>{% block title %}{% endblock %} | Bandama Market</title>
    <!-- Favicon -->
    <link href="{{ asset('front/images/favicon.ico') }}"  rel="shortcut icon" type="image/x-icon" />
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.11.3/af-2.3.7/b-2.1.1/b-colvis-2.1.1/date-1.1.1/datatables.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/leaflet/1/leaflet.css" />
    <link rel="stylesheet" href="{{ asset('front/css/owlcarousel/owl.carousel.min.css') }}" />
    <link rel="stylesheet" href="{{ asset('front/css/owlcarousel/owl.theme.default.min.css') }}" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet">
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div class="wrapper">
    <div class="preloader"></div>
    {% block header %}
        {% include 'Front/Inc/header_inc.html.twig' %}
    {% endblock %}

    {% block content %}{% endblock %}

    {% block footer %}
        {% include 'Front/Inc/footer_inc.html.twig' %}
    {% endblock %}
    <a class="scrollToHome" href="#"><i class="flaticon-arrows"></i></a>
</div>

<script type="text/javascript" src="{{ asset('front/js/jquery-3.3.1.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/jquery-migrate-3.0.0.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/popper.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/bootstrap.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/jquery.mmenu.all.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/ace-responsive-menu.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/bootstrap-select.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/isotop.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/snackbar.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/simplebar.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/parallax.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/scrollto.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/jquery-scrolltofixed-min.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/jquery.counterup.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/wow.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('front/js/slider.js') }}"></script>
{#
<script type="text/javascript" src="{{ asset('front/js/pricing-slider.js') }}"></script>
#}
<script type="text/javascript" src="{{ asset('front/js/timepicker.js') }}"></script>
<!-- Custom script for all pages -->
<script type="text/javascript" src="{{ asset('front/js/script.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="{{ asset('bundles/fosjsrouting/js/router.min.js') }}"></script>
<script src="{{ asset('front/js/form-wizard.js') }}"></script>
<script src="{{ path('fos_js_routing_js', { callback: 'fos.Router.setData' }) }}"></script>
<script src="https://cdn.jsdelivr.net/npm/places.js@1.19.0/dist/cdn/places.min.js"></script>
<script src="https://cdn.jsdelivr.net/leaflet/1/leaflet.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.11.3/af-2.3.7/b-2.1.1/b-colvis-2.1.1/date-1.1.1/datatables.min.js"></script>
<script src="{{ asset('front/js/owl.carousel.min.js') }}"></script>
<script src="{{ asset('bundles/fosjsrouting/js/router.min.js') }}"></script>
<script src="{{ path('fos_js_routing_js', { callback: 'fos.Router.setData' }) }}"></script>
<script>
    $(function() {
        const map = $('#map');
        const paths = $('#map .map__image a');
        const links = $('#map .map__list a');

        let activeArea = function (id) {
            $('#map .is-active').each(function(i, v) {
                $(this).removeClass('is-active');
            })
            if (id !== undefined) {
                $('#list-' + id).addClass('is-active');
                $('#region-' + id).addClass('is-active');
            }
        }

        paths.each(function (index, path) {
            path.addEventListener('mouseenter', function (e) {
                let id  = this.id.replace('region-', '');
                activeArea(id);
            });
        });

        links.each(function (index, link) {
            link.addEventListener('mouseenter', function (e) {
                let id  = this.id.replace('list-', '');
                activeArea(id);
            });
        });

        map.on('mouseover', function () {
            activeArea();
        });

        $('[data-toggle="tooltip"]').tooltip();

        $('.mm-navbar__title').text('Navigation');

        $('.select-field').select2();


        /* ==== recovery password === */
        $('form#form-recovery-passwd').on('submit', function (e) {
            e.preventDefault();
            const email = $('#email-recovery').val();
            if (email === '') {
                console.error('saisir email');

                return false;
            }
            $.ajax({
                url: Routing.generate('recovery_password_bdmk'),
                method: 'POST',
                data: {email: email},
                dataType: 'json'
            }).done(function (data) {
                if (data.state === "success") {
                    $('#form-recovery-passwd').hide();
                    $('#recovery-box-password').append('<div class="alert alert-success text-center">'+data.message+'</div>');
                }
            }).fail(function (jqXHR) {
                console.log(jqXHR.responseJSON.message);
                console.error('Erreur email');
            });
        });

        $('.eye-icon-passwd').on('click', function(e) {
            $(this).toggleClass('visible-eye-password');
            if ($(this).hasClass('visible-eye-password')) {
                $('#exampleInputPassword4').attr('type', 'text');
            } else  {
                $('#exampleInputPassword4').attr('type', 'password');

            }
        });

        $('.eye-icon-passwd-register').on('click', function (e) {
            $(this).toggleClass('visible-eye-password');
            if ($(this).hasClass('visible-eye-password')) {
                $('#registration_particular_password_first').attr('type', 'text');
            } else  {
                $('#registration_particular_password_first').attr('type', 'password');

            }
        });

        $('.eye-icon2-passwd-register').on('click', function (e) {
            $(this).toggleClass('visible-eye-password');
            if ($(this).hasClass('visible-eye-password')) {
                $('#registration_particular_password_second').attr('type', 'text');
            } else  {
                $('#registration_particular_password_second').attr('type', 'password');

            }
        });

        $('.eye-icon-passwd-pro-register').on('click', function (e) {
            $(this).toggleClass('visible-eye-password');
            if ($(this).hasClass('visible-eye-password')) {
                $('#registration_password_first').attr('type', 'text');
            } else  {
                $('#registration_password_first').attr('type', 'password');

            }
        });

        $('.eye-icon2-passwd-pro-register').on('click', function (e) {
            $(this).toggleClass('visible-eye-password');
            if ($(this).hasClass('visible-eye-password')) {
                $('#registration_password_second').attr('type', 'text');
            } else  {
                $('#registration_password_second').attr('type', 'password');

            }
        });

        (function() {
            const inputLocation = document.querySelector('#annonce_location');

            if (inputLocation !== null) {
                function addMarker(suggestion) {
                    var marker = L.marker(suggestion.latlng, {opacity: .4});
                    marker.addTo(map);
                    markers.push(marker);
                }

                function removeMarker(marker) {
                    map.removeLayer(marker);
                }

                function findBestZoom() {
                    var featureGroup = L.featureGroup(markers);
                    map.fitBounds(featureGroup.getBounds().pad(0.5), {animate: false});
                }

                let place = places({
                    container: inputLocation
                }).configure({
                    language: 'fr',
                    countries: ['CI'],
                    type: 'address',
                    aroundLatLngViaIP: false
                });

                let map = L.map('box-map-address', {
                    scrollWheelZoom: false,
                    zoomControl: false
                });

                let osmLayer = new L.TileLayer(
                    'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        minZoom: 1,
                        maxZoom: 16,
                        touchZoom: true,
                        attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
                    }
                );

                let markers = [];

                map.setView(new L.LatLng(0, 0), 1);
                map.addLayer(osmLayer);

                place.on('suggestions', function (e) {
                    markers.forEach(removeMarker);
                    markers = [];

                    if (e.suggestions.length === 0) {
                        map.setView(new L.LatLng(0, 0), 1);
                        return;
                    }

                    e.suggestions.forEach(addMarker);
                    findBestZoom();
                });
                place.on('cursorchanged', function (e) {
                        markers
                            .forEach(function(marker, markerIndex) {
                                if (markerIndex === e.suggestionIndex) {
                                    marker.setOpacity(1);
                                    marker.setZIndexOffset(1000);
                                } else {
                                    marker.setZIndexOffset(0);
                                    marker.setOpacity(0.5);
                                }
                            });
                });
                place.on('change',  function (e) {
                    markers
                        .forEach(function(marker, markerIndex) {
                            if (markerIndex === e.suggestionIndex) {
                                markers = [marker];
                                marker.setOpacity(1);
                                findBestZoom();
                            } else {
                                removeMarker(marker);
                            }
                        });
                    let suggest = e.suggestion;
                    document.querySelector('#annonce_lat').value = suggest.latlng.lat;
                    document.querySelector('#annonce_lng').value = suggest.latlng.lng;
                    document.querySelector('#annonce_postalCode').value = suggest.postcode;
                });
                place.on('clear', function () {
                    map.setView(new L.LatLng(0, 0), 1);
                    markers.forEach(removeMarker);
                    document.querySelector('#annonce_lat').value = '';
                    document.querySelector('#annonce_lng').value = '';
                    document.querySelector('#annonce_postalCode').value = '';
                });

        }})();


        function previewBeforeUpload(id){
            let check = document.querySelector('#'+id);
            if (!check) {
                return false;
            }
            document.querySelector('#'+id).addEventListener('change', function(e){
                if(e.target.files.length === 0){
                    return;
                }
                let file = e.target.files[0];
                let url = URL.createObjectURL(file);
                document.querySelector("#"+id+"-preview div").innerText = file.name;
                document.querySelector("#"+id+"-preview img").src = url;
                $("#"+id+"-preview .delete-img").css('display', 'block');
            });
        }

        previewBeforeUpload('annonce_pictureOneFile');
        previewBeforeUpload('annonce_pictureTwoFile');
        previewBeforeUpload('annonce_pictureThreeFile');
        previewBeforeUpload('annonce_pictureFourFile');
        previewBeforeUpload('annonce_pictureFiveFile');
        previewBeforeUpload('annonce_pictureSixFile');
        previewBeforeUpload('annonce_pictureSevenFile');
        previewBeforeUpload('annonce_pictureHeightFile');

        const $rubrique = $('#annonce_rubrique');
        //$('#annonce_category').attr('disabled', 'disabled');
        $('#state-add-form #annonce_state').attr('disabled', 'disabled');

        $rubrique.change(function() {
            // ... retrieve the corresponding form.
            var $form = $(this).closest('form');
            // Simulate form data, but only include the selected sport value.
            var data = {};
            data[$rubrique.attr('name')] = $rubrique.val();
            // Submit data via AJAX to the form's action path.
            $.ajax({
                url : $form.attr('action'),
                type: $form.attr('method'),
                data : data,
                beforeSend: function () {
                    $('#annonce_category').attr('disabled', 'disabled');
                    $('#annonce_category').val('');
                    $('#annonce_state').attr('disabled', 'disabled');
                    $('#annonce_state').val('');
                },
                complete: function (html) {
                    // Replace current position field ...
                    $('#annonce_category').replaceWith(
                        // ... with the returned one from the AJAX response.
                        $(html.responseText).find('#annonce_category')
                    );
                    $('#annonce_state').replaceWith(
                        // ... with the returned one from the AJAX response.
                        $(html.responseText).find('#annonce_state')
                    );
                    $('#annonce_category').removeAttr('disabled');
                    $('#annonce_state').removeAttr('disabled');
                    // Position field now displays the appropriate positions.
                }
            });

            if ($('#annonce_rubrique').val() !== '') {
                $.ajax({
                    url: Routing.generate('admin_rubrique_img_bdmk'),
                    method: 'POST',
                    dataType: 'json',
                    data: {id: parseInt($rubrique.val())}
                }).done(function (data) {
                    let $src = '/front/rubfiles/'+ data.filename;
                    $('.img-rubrique').attr('src', $src);
                }).fail(function (jqXHR) {
                    console.log(jqXHR);
                    $('.img-rubrique').attr('src', $src);
                    $('.img-rubrique').attr('alt', data.slug);
                });
            } else {
                $('.img-rubrique').attr('src', '');
                $('.img-rubrique').attr('alt', '');
            }
        });

        $('.main-annonce label').on('click', 'span.delete-img', function (e) {
            e.preventDefault();
            const id = $(this).data('id');
            $('#'+id).val('');
            $("#"+id+"-preview div").html('<span>+</span>');
            $("#"+id+"-preview img").attr('src', 'https://bit.ly/3ubuq5o');
            $(this).css('display', 'none')
        });

        $('#registration_particular_password_first').on('keyup', function(e){
            $('.rgx-passwd').fadeIn('400');
        });

        $('#registration_password_first').on('keyup', function (e) {
            $('.rgx-passwd').fadeIn('400');
        })

        $('#registration_particular_password_second').on('keyup', function (e) {
            const pass1 = $('#registration_particular_password_first').val();
            const pass2 = $(this).val();
            if (pass1 !== pass2) {
                $('.actly-passwd').fadeIn('400');
            } else {
                $('.actly-passwd').fadeOut('400');
            }
        });

        $('#registration_password_second').on('keyup', function (e) {
            const pass1 = $('#registration_password_first').val();
            const pass2 = $(this).val();
            if (pass1 !== pass2) {
                $('.actly-passwd').fadeIn('400');
            } else {
                $('.actly-passwd').fadeOut('400');
            }
        });


        $(".owl-carousel.at-one").owlCarousel({
            loop:true,
            margin: 10,
            responsiveClass:true,
            responsive:{
                0:{
                    items:2,
                    nav:false,
                    dots: true
                },
                768:{
                    items:3,
                    nav:true,
                    dots: false,
                },
                992:{
                    items:5,
                    nav:true,
                    dots: false
                }
            },
            autoplay: true,
            autoplayTimeout: 10000,
            navText: ['<i class="fa fa-chevron-left"></i>', '<i class="fa fa-chevron-right"></i>']
        });

        $('#annonce_price').on('keyup', function () {
           let $value = $(this).val();
           $(this).val($value.replace(/\s+/g, ""));
        });


    });
</script>
</body>
</html>
